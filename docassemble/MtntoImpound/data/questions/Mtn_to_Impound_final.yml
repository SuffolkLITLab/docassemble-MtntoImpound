include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.MassAccess:massaccess.yml
---
comment: |
  The metadata section controls the tab title and saved interview title. You can delete this section if you include this YAML file in another YAML file.
metadata:
  title: |
    Motion to Impound 
  short title: |
    Mtn to Impound 
---
comment: |
  This section is used by MAVirtualCourts to control how some of the questions work.
mandatory: True
code: |
  interview_metadata # make sure we initialize the object
  if not defined("interview_metadata['Mtn_to_Impound_final']"):
    interview_metadata.initializeObject('Mtn_to_Impound_final')
  interview_metadata['Mtn_to_Impound_final'].update({
    'title': 'Motion to Impound',
    'short title': 'Mtn to Impound',
    'description': 'Motion to Impound',
    'original_form': '',
    'allowed courts': [
      'Probate and Family Court',
    ],
    'categories': [
      'Domestic Violence / Safety of self',
      'Family Law',
    ],
    'logic block variable': 'Mtn_to_Impound_final',
    'attachment block variable': 'Mtn_to_Impound_final_attachment',
    'typical role': 'unknown',
  })
---
features:
  navigation: True
---
sections:
  - review_Mtn_to_Impound_final: Review your answers
---
id: interview_order_Mtn_to_Impound_final
code: |
  # This is a placeholder to control logic flow in this interview

  basic_questions_intro_screen 
  Mtn_to_Impound_final_intro
  # Set the allowed courts for this interview
  allowed_courts = interview_metadata["Mtn_to_Impound_final"]["allowed courts"]
  nav.set_section('review_Mtn_to_Impound_final')
  # Below sets the user_role by asking a question.
  # You can set user_role directly instead to either 'plaintiff' or 'defendant'
  user_ask_role
  if len(users) > 1:
    multiple_users # event name
  trial_court.address.county
  str(docket_numbers)
  str(other_parties)
  if len(other_parties) > 0:
    other_parties[0].address
  affidavit_narrative
  delivery_mode
  str(users)
  signature_date
  # Set the answer file name.
  set_parts(subtitle=str(users))
  set_progress(14.29)
  set_progress(28.57)
  # Save (anonymized) interview statistics.
  store_variables_snapshot(
    persistent=True,
    data={'zip': showifdef("users[0].address.zip"), "reached_interview_end": True})
  Mtn_to_Impound_final_preview_question # Pre-canned preview screen
  basic_questions_signature_flow
  Mtn_to_Impound_final = True
---
comment: |
  This question is used to introduce your interview. Please customize
id: Mtn to Impound
continue button field: Mtn_to_Impound_final_intro
question: |
   Motion to Impound
subquestion: |
  ## This interview is to prepare a motion that asks the court to prevent  certain information from being disclosed. 
  
  This includes automatically keeping the requested information from being disclosed to the public and from the other party. *Keep in mind that certain persons will still be able to access this information when necessary in the performance of their duties. This includes victim-witness advocates, the judge, and law enforcement officers.*
  
  **This interview is only for cases in *Probate and Family Court.***
  
  Please review the [Massachusetts Trial Court Rules](https://www.mass.gov/trial-court-rules/trial-court-rule-viii-uniform-rules-on-impoundment-procedure) for more information on the motion and procedure.
---
continue button field: multiple_users
id: Notice to multiple users
question: |
  Notice: Your case involves co-parties
subquestion: |
  Please note, this app will help you request that the court keeps **your** information private. *If you have co-parties that also need to keep their information private, have each of them complete this app separately to produce their own motions.*
---
id: Review your form before you sign it
continue button field: Mtn_to_Impound_final_preview_question
question: |
  Review your form before you sign it
subquestion: |
  Here is a preview of the form you'll sign on the next page. 
  
   ${ pdf_concatenate(Mtn_to_Impound_final_attachment['preview'], filename='Mtn_to_Impound_final.pdf')}

---
id: is the user the plaintiff or defendant?
comment: |
  This question is asked if the interview can be used by both
  a Plaintiff and a Defendant. It sets the value of `user_role`,
  `plaintiffs`, `defendants`, `petitioners` and `respondents`.
  
  If you know your interview is exclusively
  used by the Plaintiff or Defendant, set `user_role = 'plaintiff'` or 
  `user_role='defendant'` in your code.
question: |
  Did you start this case, or are you responding to a case
  that someone else started?
fields: 
  - no label: user_ask_role
    datatype: radio
    choices:
      - Started the case: plaintiff
      - Responding to a case: defendant
  - note: |
      Okay, you are the **Plaintiff** or Petitioner in this case. The other 
      side is the **Defendant** or Respondent.
    show if:
      variable: user_ask_role
      is: "plaintiff"
  - note: |
      Okay, you are the **Defendant** or Respondent in this case. The other 
      side is the **Plaintiff** or Petitioner.
    show if:
      variable: user_ask_role
      is: "defendant"
help:
  label: |
    How do I know?
  content: |
    If you are the first person to file a form in the case, you 
    started the case. You are the "Plaintiff" or the "Petitioner."
  
    If you are responding to a case or court papers someone else filed, you
    are the "Defendant" or the "Respondent."
---
id: any other users
question: |
  Is anyone else on your side of this case?
subquestion: |
  % if len(users.elements) > 1:  
  So far you have told us about ${comma_and_list(users.complete_elements())}.
  % endif
fields:
  - no label: users.there_is_another
    datatype: yesnoradio
---
sets:
  - users[i].name.first
  - users[i].name.last
  - users[i].name.middle
  - users[i].name.suffix    
id: other users names
question: |
  Who is the ${ ordinal(i) } person on your side of the case?
fields:
  - code: |
      users[i].name_fields()
---
id: Impoundment Information
question: |
  Impoundment Information
subquestion: |
  This information lets the court know what information you are seeking to prevent the other party from accessing.
fields:
  - 'What information are you seeking to impound?': impound_list
    datatype: checkboxes
    choices:
      - Home Address
      - Work Address
      - School Address
      - Telephone Number
---
id: Affidavit Narrative
question: |
  Why do you need the court to impound your information?
subquestion: |
    Privacy alone is usually not enough. Good reasons for impounding include the information is very sensitive, such as involving sexual assault, or could be very damaging to you or your children, or could be used for reasons that could harm you or your children.
    
    Be specific. Include facts about your safety.
fields:
  - no label: affidavit_narrative
    maxlength: 864
    input type: area
    rows: 5
---
id: Delivery Information
question: |
  How are you delivering the other party with this motion?
field: delivery_mode
buttons:
  - In Person: hand
  - By Mail: mail

---
progress: 100
mandatory: True
id: Your form is ready to download and file
question: |
  Your form is ready to download and file
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  Below is a preview of your form.
  
  ${pdf_concatenate(Mtn_to_Impound_final_attachment['final'], filename='Mtn_to_Impound_final.pdf') }
need: Mtn_to_Impound_final
attachment code: Mtn_to_Impound_final_attachment['final']
---
objects:
  - Mtn_to_Impound_final_attachment: DADict
---
attachment:
    variable name: Mtn_to_Impound_final_attachment[i]
    name: Mtn to impound final
    filename: Mtn_to_impound_final
    docx template file: Mtn_to_Impound_final.docx
---
id: Mtn_to_Impound_final review screen
event: review_Mtn_to_Impound_final
question: |
  Placeholder Review Screen
subquestion: |
  Edit your answers below
review: 
  - Edit: affidavit_narrative
    button: |
      What information can you provide the court as to why this information should not be shared with the other party?:
      > ${ single_paragraph(affidavit_narrative) }
  - Edit: impound_list
    button: |
      What information are you seeking to impound?:
      > ${ single_paragraph(impound_list) }
  - Edit: other_parties[0].address
    button: |
      Other Party's address:
      ${ other_parties[0].address }
  - Edit: signature_date
    button: |
      signature_date:
      ${ signature_date }
  - Edit: trial_court.address.county
    button: |
      trial_court.address.county:
      ${ trial_court.address.county }
  - Edit: other_parties[0].name.first
    button: |
      other_parties:
      ${ other_parties }
  - Edit: docket_numbers[0].name.first
    button: |
      docket_numbers:
      ${ docket_numbers }
  - Edit: users[0].name.first
    button: |
      users:
      ${ users }
